<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For All of Tracy - Results for {{ category }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../static/custom.css">
    <link rel="stylesheet" type="text/css" href="../static/NavbarResults.css">
    <script src="../static/Loading.js"></script>
    
</head>
<style>
    .content {
            display: none;
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #161616;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999;
        }

        /* Loader Animation */
        .wrapper {
            width: 200px;
            height: 60px;
            position: relative;
            z-index: 1;
        }

        .circle {
            width: 20px;
            height: 20px;
            position: absolute;
            border-radius: 50%;
            background-color: #fff;
            left: 15%;
            transform-origin: 50%;
            animation: circle7124 0.5s alternate infinite ease;
        }

        @keyframes circle7124 {
            0% {
                top: 60px;
                height: 5px;
                border-radius: 50px 50px 25px 25px;
                transform: scaleX(1.7);
            }
            40% {
                height: 20px;
                border-radius: 50%;
                transform: scaleX(1);
            }
            100% {
                top: 0%;
            }
        }

        .circle:nth-child(2) {
            left: 45%;
            animation-delay: 0.2s;
        }

        .circle:nth-child(3) {
            left: auto;
            right: 15%;
            animation-delay: 0.3s;
        }

        .shadow {
            width: 20px;
            height: 4px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.9);
            position: absolute;
            top: 62px;
            transform-origin: 50%;
            z-index: -1;
            left: 15%;
            filter: blur(1px);
            animation: shadow046 0.5s alternate infinite ease;
        }

        @keyframes shadow046 {
            0% {
                transform: scaleX(1.5);
            }
            40% {
                transform: scaleX(1);
                opacity: 0.7;
            }
            100% {
                transform: scaleX(0.2);
                opacity: 0.4;
            }
        }

        .shadow:nth-child(4) {
            left: 45%;
            animation-delay: 0.2s;
        }

        .shadow:nth-child(5) {
            left: auto;
            right: 15%;
            animation-delay: 0.3s;
        }
    body {
        background-image: url('./static/Background.svg'); 
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-size: cover;
        font-family: "Montserrat", sans-serif;
        
    } 
    .brutalist-card {
            width: 900px;
            transform:translateX(-215px);
            border: 4px solid #000000;
            background-color: #1c1c1c;
            padding: 1.5rem;
            box-shadow: 10px 10px 0 #101010;
            font-family: "Arial", sans-serif;
            border-radius: 15px;
        }

        .brutalist-card__header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #000000;
            padding-bottom: 1rem;
        }


        .brutalist-card__alert {
            font-weight: 900;
            color: #fff;
            font-size: 1.5rem;
            text-transform: uppercase;
        }

        .brutalist-card__message {
            margin-top: 1rem;
            color: #fff;
            font-size: 1rem;
            line-height: 1.4;
            border-bottom: 2px solid #fff;
            padding-bottom: 1rem;
            font-weight: 600;
        }

        .brutalist-card__actions {
            margin-top: 1rem;
        }

        .brutalist-card__button {
            display: block;
            width: 100%;
            padding: 0.75rem;
            text-align: center;
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            border: 3px solid #fff;
            background-color: #000;
            color: #fff;
            position: relative;
            transition: all 0.2s ease;
            box-shadow: 5px 5px 0 #fff;
            overflow: hidden;
            text-decoration: none;
            margin-bottom: 1rem;
            border-radius: 16px;
        }

        .brutalist-card__button--read {
            background-color: #fff;
            color: #000;
            border-radius: 16px;
        }

        .brutalist-card__button:hover {
            transform: translate(-2px, -2px);
            box-shadow: 7px 7px 0 #fff;
            border-radius: 16px;
        }

        .brutalist-card__button--mark:hover {
            background-color: #ff0000;
            border-color: #ff0000;
            color: #000;
            box-shadow: 7px 7px 0 #800000;
            border-radius: 16px;
        }

        .brutalist-card__button--read:hover {
            background-color: #296fbb;
            border-color: #296fbb;
            color: #000;
            box-shadow: 7px 7px 0 #004280;
            border-radius: 16px;
        }

        .brutalist-card__button:active {
            transform: translate(5px, 5px);
            box-shadow: none;
            border-radius: 16px;
        }
        
    
</style>
<body>
    <!-- <div class="loading-screen" style="display: flex;">
        <div class="wrapper">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="shadow"></div>
            <div class="shadow"></div>
            <div class="shadow"></div>
        </div>
    </div> -->
    <!-- <div class="nav-barslide"> -->
        <div class="navbar">
            <a href="/" class="logo-link">
                <div class="logo"></div>
            </a>
            <ul class="nav-links">
                <li class="nav-tab" data-tab="Tab 1">
                    <a href="/">
                        <button>Home</button>
                    </a>
                </li>
                <li class="nav-tab" data-tab="Tab 2">
                    <a href="/aboutus">
                        <button>About Us</button>
                    </a>
                </li>
                <li class="nav-tab expandable" data-tab="Tab 3">
                    <button>Communities</button>
                    <div class="dropdown-content communities-content">
                        <div class="communities-menu">
                            <div class="main-items">
                                <a href="/enterinfo?enter=Ellis" class="text-decoration-none">
                                    <div class="community-item" style="background-image: url('./static/ellis.png'); background-size: cover; background-position: center; filter: grayscale(100%); transition: filter 0.5s ease-in-out;opacity: 1;" 
                                    onmouseover="this.style.filter='grayscale(0%)'" 
                                    onmouseout="this.style.filter='grayscale(100%)'">
                                        <div class="community-title" style="margin-top: auto; margin-bottom: auto; font-weight: bolder; font-size: larger;">Ellis</div>
                                    </div>
                                </a>
                                <a href="/enterinfo?enter=Tracy Hills" class="text-decoration-none">
                                    <div class="community-item" style="background-image: url('./static/TracyHills.jpeg'); background-size: cover; background-position: center; filter: grayscale(100%); transition: filter 0.5s ease-in-out;opacity: 1;" 
                                    onmouseover="this.style.filter='grayscale(0%)'" 
                                    onmouseout="this.style.filter='grayscale(100%)'">
                                        <div class="community-title" style="margin-top: auto;margin-bottom: auto;font-weight: bolder; font-size: larger;">Tracy Hills</div>
                                    </div>
                                </a>
                            </div>
                            <div class="side-items">
                                <a href="/enterinfo?enter=RedBridge" class="text-decoration-none">
                                    <div class="community-item" style="background-color: white; background-size: cover; background-position: center; filter: grayscale(100%); transition: filter 0.5s ease-in-out;opacity: 1;" 
                                    onmouseover="this.style.filter='grayscale(0%)'" 
                                    onmouseout="this.style.filter='grayscale(100%)'">
                                        <div class="community-title" style="margin-top: -5px;font-weight: 550; font-size: small-regular;">RedBridge</div>
                                    </div>
                                </a>
                                <a href="/enterinfo?enter=Edgewood" class="text-decoration-none">
                                    <div class="community-item" style="background-color: white; background-size: cover; background-position: center; filter: grayscale(100%); transition: filter 0.5s ease-in-out;opacity: 1;" 
                                    onmouseover="this.style.filter='grayscale(0%)'" 
                                    onmouseout="this.style.filter='grayscale(100%)'">
                                        <div class="community-title" style="margin-top: -5px;font-weight: 550; font-size: small-regular;">Edgewood</div>
                                    </div>
                                </a>
                                <a href="/enterinfo?enter=Sungold" class="text-decoration-none">
                                    <div class="community-item" style="background-color: white; background-size: cover; background-position: center; filter: grayscale(100%); transition: filter 0.5s ease-in-out;opacity: 1;" 
                                    onmouseover="this.style.filter='grayscale(0%)'" 
                                    onmouseout="this.style.filter='grayscale(100%)'">
                                        <div class="community-title" style="margin-top: -5px;font-weight:550; font-size: small-regular;">Sungold</div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </li>
                <li class="nav-tab" data-tab="Tab 4">
                    <a href="/businessForm">
                        <button>Business RQ</button>
                    </a>
                </li>
                <li class="nav-tab expandable" data-tab="Tab 5">
                    <button>Contact</button>
                    <div class="dropdown-content contact-content">
                        <div class="contact-container">
                            <div class="contact-box" style="background-image:  linear-gradient(#3e3e3e 0.7000000000000001px, transparent 0.7000000000000001px), linear-gradient(to right, #3e3e3e 0.7000000000000001px, #0f0f0f 0.7000000000000001px); background-size: 14px 14px;">Phone Number</div>
                            <div class="contact-box" style="opacity: 1; background-image: radial-gradient( ellipse farthest-corner at 7px 7px , #3e3e3e, #3e3e3e 50%, #0f0f0f 50%); background-size: 7px 7px;">Email</div>
                        </div>
                    </div>
                </li>
                <form class="d-flex" action="/enterinfo" style="margin-left: 50px;">
                  <div class="brutalist-container">
                    <input  placeholder="Search" class="brutalist-input smooth-type" type="text" name="enter" required/>
                    <button type="submit" class="search-button" onclick="enterprompt()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </button>
                  </div>
              </form>
            </ul>
        </div>
    <!-- </div> -->
    <h2 style="text-align: center; font-size: xx-large; font-weight: bold; color: white; margin-top: 100px; margin-bottom: -90px;padding-top: 50px;"> Search Results For: {{category}}</h2>
    <div class="vw-100 vh-100 d-flex justify-content-center align-items-center flex-column">
        <div id="cards-container" class="glass-box scroll-1" style="height: 45rem; overflow-y: scroll;margin-top: 10px;">
            <div class="card-body d-flex flex-column justify-content-center" style="width: 40rem;" id="search-results-container">
                {% for business in businesses %}
                    <div class="glass-box my-2">
                        <div class="card-body" style="cursor: pointer;background-color: #333333;" data-bs-toggle="modal" data-bs-target="#detailsModal" onclick="showBusinessDetails('{{ business['businessName'] }}', {{ business | tojson }});">
                            <h5 class="card-title">{{ business['businessName'] }}</h5>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Modal for displaying business details -->
    <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="background: none; border: none;">
                <div class="brutalist-card">
                    <div class="brutalist-card__header">
                        <div class="brutalist-card__icon">
                            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"></path>
                            </svg>
                        </div>
                        <div class="brutalist-card__alert" id="modal-business-name">Business Name :{{ business}}</div>
                    </div>
                    <div class="brutalist-card__message" id="modal-business-info">
                        <p><strong>Owner Name:</strong> N/A</p>
                        <p><strong>Hours:</strong> N/A</p>
                        <p><strong>Address:</strong> N/A</p>
                        <p><strong>Contact Phone:</strong> N/A</p>
                        <p><strong>Contact Email:</strong> N/A</p>
                    </div>
                    <div class="brutalist-card__actions">
                        <a class="brutalist-card__button brutalist-card__button--mark" href="#" data-bs-dismiss="modal">Close</a>
                        <!-- <a class="brutalist-card__button brutalist-card__button--read" href="#">Contact Business</a> -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Parse businesses data from Python
        const businesses = {{ businesses | tojson }};
        console.log(businesses);

        const showBusinessDetails = (businessName, businessInfo) => {
            document.getElementById("modal-business-name").innerText = `Business Name: ${businessName}`;
            document.getElementById("modal-business-info").innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 20px; margin-top: 20px;">
                    <div style="flex: 1; text-align: left; color: white;">
                        <p><strong>Owner Name:</strong> ${businessInfo.ownername || "N/A"}</p>
                        <p><strong>Hours:</strong> ${businessInfo.businessHours || "N/A"}</p>
                        <p><strong>Location:</strong>${businessInfo.businessLocation || "N/A"}</p>
                    </div>
                    <div style="flex: 1; text-align: right; color: white;">
                        <p><strong>Contact Phone:</strong> <a style="color:red" href="tel:${businessInfo.PhoneNumber || "#"}">${businessInfo.PhoneNumber || "N/A"}</a></p>
                        <p><strong>Contact Email:</strong> <a style="color:red" href="mailto:${businessInfo.Email || "#"}">${businessInfo.Email || "N/A"}</a></p>
                    </div>
                </div>
            `;
            new bootstrap.Modal(document.getElementById('detailsModal')).show();
        };
    
        // Dynamically create business cards
        const createBusinessCard = (business) => {
            const card = document.createElement("div");
            card.className = "card my-2";
            card.innerHTML = `
                <div class="card-body" style="cursor: pointer;">
                    <h5 class="card-title">${business.businessName}</h5>
                </div>
            `;
            card.querySelector('.card-body').addEventListener('click', () => {
                showBusinessDetails(business.businessName, business);
            });
            document.getElementById("search-results-container").appendChild(card);
        };
    
        // Ensure no duplicate rendering
        window.onload = () => {
            const container = document.getElementById("search-results-container");
            container.innerHTML = ""; // Clear existing content
            businesses.forEach((business) => {
                createBusinessCard(business);
            });
        };
    </script>
    <script>
        const tabs = document.querySelectorAll('.nav-tab');
        const navbar = document.querySelector('.navbar');
        let activeTab = null;
  
        function clearAllDropdowns() {
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            navbar.classList.remove('hover-expand');
        }
  
        tabs.forEach(tab => {
            tab.addEventListener('mouseenter', function() {
                const isExpandable = tab.classList.contains('expandable');
                
                clearAllDropdowns();
                
                if (isExpandable) {
                    navbar.classList.add('hover-expand');
                    tab.classList.add('active');
                    activeTab = tab;
                } else {
                    activeTab = null;
                }
            });
        });
  
        navbar.addEventListener('mouseleave', function() {
            clearAllDropdowns();
        });
  
        document.addEventListener('click', function(event) {
            if (!navbar.contains(event.target)) {
                clearAllDropdowns();
            }
        });
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
